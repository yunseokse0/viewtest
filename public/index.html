<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ViewBot - 웹사이트 접속 시뮬레이션</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🚀 ViewBot</h1>
            <p class="subtitle">웹사이트 접속 시뮬레이션 도구</p>
        </header>

        <div class="main-content">
            <div class="control-panel">
                <h2>설정</h2>
                <form id="botForm">
                    <div class="form-group">
                        <label for="url">URL</label>
                        <input type="url" id="url" name="url" placeholder="https://www.youtube.com/watch?v=9aIHJ3cKsLo" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="instances">동시 실행 수</label>
                            <input type="number" id="instances" name="instances" value="5" min="1" max="300" required>
                        </div>

                        <div class="form-group">
                            <label for="minDelay">최소 대기 시간 (초)</label>
                            <input type="number" id="minDelay" name="minDelay" value="5" min="1" max="60" required>
                        </div>

                        <div class="form-group">
                            <label for="maxDelay">최대 대기 시간 (초)</label>
                            <input type="number" id="maxDelay" name="maxDelay" value="15" min="1" max="120" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="headless" name="headless" checked>
                            <span>헤드리스 모드 (브라우저 창 숨김)</span>
                        </label>
                        <label class="checkbox-label" style="margin-top:8px;">
                            <input type="checkbox" id="playMuted" name="playMuted" checked>
                            <span>음소거 재생</span>
                        </label>
                        
                        <!-- 자동 시청자 수 관리 설정 -->
                        <div class="auto-viewer-management" style="margin-top: 16px; padding: 12px; background: #f8f9fa; border-radius: 6px;">
                            <h4 style="margin: 0 0 12px 0; font-size: 14px; color: #333;">🎯 자동 시청자 수 관리</h4>
                            
                            <label class="checkbox-label">
                                <input type="checkbox" id="autoViewerManagement" name="autoViewerManagement">
                                <span>자동 관리 활성화</span>
                            </label>
                            
                            <div class="viewer-management-options" style="margin-top: 12px; display: none;">
                                <div class="form-group">
                                    <label for="targetViewerCount">목표 시청자 수:</label>
                                    <input type="number" id="targetViewerCount" name="targetViewerCount" value="25" min="10" max="100">
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="minViewerCount">최소 시청자:</label>
                                        <input type="number" id="minViewerCount" name="minViewerCount" value="20" min="5" max="50">
                                    </div>
                                    <div class="form-group">
                                        <label for="maxViewerCount">최대 시청자:</label>
                                        <input type="number" id="maxViewerCount" name="maxViewerCount" value="35" min="15" max="100">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="increaseDuration">증가 시간 (초):</label>
                                        <input type="number" id="increaseDuration" name="increaseDuration" value="300" min="60" max="1800">
                                    </div>
                                    <div class="form-group">
                                        <label for="decreaseDuration">감소 시간 (초):</label>
                                        <input type="number" id="decreaseDuration" name="decreaseDuration" value="300" min="60" max="1800">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="maxCycles">반복 횟수:</label>
                                        <input type="number" id="maxCycles" name="maxCycles" value="3" min="1" max="10">
                                    </div>
                                    <div class="form-group">
                                        <label for="viewerCheckInterval">확인 간격 (초):</label>
                                        <input type="number" id="viewerCheckInterval" name="viewerCheckInterval" value="30" min="10" max="300">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="button-group">
                        <button type="submit" id="startBtn" class="btn btn-primary">시작</button>
                        <button type="button" id="stopBtn" class="btn btn-danger" disabled>중지</button>
                    </div>
                </form>
            </div>

            <div class="stats-panel">
                <h2>통계</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">총 접속 수</div>
                        <div class="stat-value" id="totalVisits">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">진행 중</div>
                        <div class="stat-value" id="activeSessions">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">완료</div>
                        <div class="stat-value" id="completedSessions">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">실패</div>
                        <div class="stat-value" id="failedSessions">0</div>
                    </div>
                </div>
                <div class="runtime">
                    <div class="stat-label">실행 시간</div>
                    <div class="stat-value" id="runtime">00:00:00</div>
                </div>
                
                <!-- YouTube 시청자 수 표시 (YouTube URL일 때만 표시) -->
                <div id="viewerCountPanel" class="viewer-count-panel" style="display: none;">
                    <h3>YouTube 시청자 수</h3>
                    <div class="viewer-stats">
                        <div class="viewer-stat-item">
                            <div class="stat-label">시작 시</div>
                            <div class="stat-value" id="initialViewerCount">-</div>
                        </div>
                        <div class="viewer-stat-item">
                            <div class="stat-label">현재</div>
                            <div class="stat-value" id="currentViewerCount">-</div>
                        </div>
                        <div class="viewer-stat-item">
                            <div class="stat-label">변화</div>
                            <div class="stat-value" id="viewerChange">-</div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="viewerChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="log-panel">
            <div class="log-header">
                <h2>로그</h2>
                <button id="clearLogBtn" class="btn btn-small">지우기</button>
            </div>
            <div id="logContainer" class="log-container"></div>
        </div>

        <div class="control-panel" style="margin-top:16px">
            <h2>프록시 관리</h2>
            <form id="proxyForm">
                <div class="form-group">
                    <label for="proxiesText">프록시 목록 (줄바꿈 또는 쉼표로 구분)</label>
                    <textarea id="proxiesText" rows="5" placeholder="http://user:pass@host:port, socks5://host:1080"></textarea>
                </div>
                <div class="button-group">
                    <button type="submit" class="btn btn-primary">프록시 업데이트</button>
                    <button type="button" id="clearProxyBlacklistBtn" class="btn btn-small">블랙리스트 초기화</button>
                    <button type="button" id="purgeFailingBtn" class="btn btn-small">실패 프록시 제거</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="app.js"></script>
<script src="reset_proxies.js"></script></body>
</html>
