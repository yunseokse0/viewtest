# "비디오 재생 실패"가 나오는 이유

봇이 YouTube 페이지에서 `video` 요소를 찾고, **재생 중**(`!paused`, `readyState >= 2`)인지 30초 동안 반복 확인합니다.  
이 조건을 만족하지 못하면 **"비디오 재생 실패"** 로그가 찍힙니다.

## 주요 원인

| 원인 | 설명 |
|------|------|
| **1. 플레이어 로드 지연** | 페이지는 열렸지만 YouTube 플레이어(`video` 태그)가 아직 DOM에 없거나, 스트림이 로딩 중. 동시 인스턴스가 많거나 PC/네트워크가 느리면 더 자주 발생. |
| **2. 버퍼링(readyState < 2)** | `video.readyState`가 2 미만이면 재생 가능한 데이터가 부족한 상태. 라이브 스트림이 느리거나 부하가 크면 로딩이 길어짐. |
| **3. 재생 정책·자동재생 차단** | 브라우저의 자동재생 정책으로 `video.play()`가 거부되거나, YouTube가 자동재생을 막은 경우. (Headless에서 더 흔함) |
| **4. 동시 부하** | 여러 브라우저가 동시에 YouTube를 열면 PC/네트워크 부하로 페이지·스트림 로드가 느려져, 제한 시간 안에 재생이 시작되지 않음. |
| **5. 광고·동의 화면** | 광고나 쿠키 동의 화면이 재생 버튼을 가리거나, 재생 전에 사용자 동작을 요구하는 경우. (선택자로는 기본 재생 버튼만 클릭) |
| **6. 라이브 미시작/종료** | 방송이 아직 시작 전이거나 이미 종료된 경우, 플레이어가 재생 가능 상태가 되지 않음. |
| **7. YouTube UI 변경** | 재생 버튼/플레이어 DOM 구조가 바뀌어 기존 선택자(`.ytp-play-button`, `video` 등)로는 클릭·확인이 어려운 경우. |

## 코드에서 하는 일 (실패 감소용)

- **비디오 요소 대기**: `waitForSelector('video', { timeout: 20000 })` 로 플레이어가 나타날 때까지 대기.
- **재생 버튼 이중 클릭**: `.ytp-play-button` + `.ytp-large-play-button` 모두 클릭 시도.
- **대기 시간 증가**: 첫 재생 시도 전 5초 → 8초, 재생 확인 루프 8회 → 12회(약 30초)로 늘려 버퍼링·로드 지연을 조금 더 감수.

## 사용자 측에서 줄이는 방법

1. **동시 실행 수 낮추기**: 12 이하(예: 8~10)로 두면 PC/네트워크 부하가 줄어 재생 성공률이 올라가는 경우가 많음.
2. **PC/네트워크 여유 확보**: 다른 탭·프로그램을 줄이고, 안정적인 네트워크에서 실행.
3. **라이브 방송 확인**: 테스트 시 "라이브 중"인 URL만 사용.
4. **headed 모드**: YouTube URL일 때 브라우저를 보이게(headless: false) 실행하면 자동재생 제한이 완화되는 환경이 있을 수 있음.
